<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Laboratory Calculator</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#0e0f12;
      --panel:#15181d;
      --ink:#e7e9ed;
      --muted:#8c96a3;
      --line:rgba(255,255,255,0.08);
      --accent:#e6b422;
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --r-lg:16px;
    }
    body{margin:0;font-family:Inter;background:var(--bg);color:var(--ink);}    
    header{display:flex;justify-content:space-between;align-items:center;padding:14px;background:var(--panel);border-bottom:1px solid var(--line);}    
    .btn{padding:8px 12px;border-radius:10px;border:1px solid var(--line);background:var(--panel);color:var(--ink);text-decoration:none;font-weight:600;cursor:pointer;}    
    .container{max-width:900px;margin:20px auto;padding:20px;}    
    .calc-box{display:grid;grid-template-columns:1fr 260px;gap:20px;}    
    .screen{background:#000;border:1px solid var(--line);border-radius:10px;padding:16px;font-size:32px;word-break:break-all;min-height:60px;}    
    .keys{display:grid;grid-template-columns:repeat(5,1fr);gap:10px;margin-top:14px;}    
    .key{padding:14px;background:var(--panel);border:1px solid var(--line);border-radius:10px;text-align:center;font-size:18px;cursor:pointer;user-select:none;}    
    .key:active{transform:scale(.97);}    
    .history{background:var(--panel);border:1px solid var(--line);border-radius:10px;padding:10px;height:500px;overflow:auto;}    
    .hist-item{padding:6px 4px;border-bottom:1px solid var(--line);cursor:pointer;}    
    .hist-item:hover{background:rgba(255,255,255,.06);}    
  </style>
</head>
<body>
<header>
  <a class="btn" href="laboratory.html">â†© Return to Index</a>
  <button class="btn" id="theme">ðŸŒ— Theme</button>
</header>

<div class="container">
  <div class="calc-box">

    <!-- LEFT: Calculator -->
    <div>
      <div class="screen" id="display">0</div>

      <div class="keys" id="keys">
        <!-- Row 1 -->
        <div class="key" data-k="AC">AC</div>
        <div class="key" data-k="DEL">âŒ«</div>
        <div class="key" data-k="(">(</div>
        <div class="key" data-k=")">)</div>
        <div class="key" data-k="^">xÊ¸</div>

        <!-- Row 2 -->
        <div class="key" data-k="7">7</div>
        <div class="key" data-k="8">8</div>
        <div class="key" data-k="9">9</div>
        <div class="key" data-k="/">Ã·</div>
        <div class="key" data-k="sqrt">âˆš</div>

        <!-- Row 3 -->
        <div class="key" data-k="4">4</div>
        <div class="key" data-k="5">5</div>
        <div class="key" data-k="6">6</div>
        <div class="key" data-k="*">Ã—</div>
        <div class="key" data-k="log">log</div>

        <!-- Row 4 -->
        <div class="key" data-k="1">1</div>
        <div class="key" data-k="2">2</div>
        <div class="key" data-k="3">3</div>
        <div class="key" data-k="-">âˆ’</div>
        <div class="key" data-k="ln">ln</div>

        <!-- Row 5 -->
        <div class="key" data-k="0">0</div>
        <div class="key" data-k=".">.</div>
        <div class="key" data-k="pi">Ï€</div>
        <div class="key" data-k="+">+</div>
        <div class="key" data-k="=">=</div>
      </div>
    </div>

    <!-- RIGHT: History -->
    <div>
      <div class="history" id="history"></div>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded",()=>{

    const disp = document.getElementById("display");
    const hist = document.getElementById("history");
    let expr = "";

    function update(){ disp.textContent = expr || "0"; }
    function append(x){ expr += x; update(); }
    function addHistory(q,a){
      const div=document.createElement("div");
      div.className="hist-item";
      div.textContent = q + " = " + a;
      div.onclick=()=>{expr=a;update();};
      hist.prepend(div);
    }

    function evaluate(){
      try{
        let e = expr
          .replace(/Ï€/g,"Math.PI")
          .replace(/sqrt/g,"Math.sqrt")
          .replace(/log/g,"Math.log10")
          .replace(/ln/g,"Math.log");
        const ans = Function("return ("+e+")")();
        addHistory(expr,ans);
        expr = String(ans);
        update();
      }catch{
        expr = "Error";
        update();
        expr = "";
      }
    }

    document.querySelectorAll(".key").forEach(k=>{
      k.onclick=()=>{
        const v = k.dataset.k;
        if(v=="AC"){expr="";update();return;}
        if(v=="DEL"){expr=expr.slice(0,-1);update();return;}
        if(v=="="){evaluate();return;}
        if(v=="pi"){append("Ï€");return;}
        if(v=="sqrt"){append("sqrt(");return;}
        if(v=="log"){append("log(");return;}
        if(v=="ln"){append("ln(");return;}
        append(v);
      }
    });

    // theme
    const saved = localStorage.getItem('labTheme');
    if(saved) document.body.dataset.theme = saved;
    document.getElementById('theme').onclick=()=>{
      const next = document.body.dataset.theme === 'light' ? 'dark' : 'light';
      document.body.dataset.theme = next;
      localStorage.setItem('labTheme',next);
    };

  });
</script>

</body>
</html>
